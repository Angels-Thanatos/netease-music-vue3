(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2dfa3130"],{"01af":function(e,t,c){},"2c7e":function(e,t,c){"use strict";c.r(t);var n=c("7a23");const o={class:"song-list"};function l(e,t,c,l,a,i){const s=Object(n["resolveComponent"])("SongListDetail"),r=Object(n["resolveComponent"])("SongListMenu");return Object(n["openBlock"])(),Object(n["createElementBlock"])("div",o,[Object(n["createVNode"])(s,{songListDetail:l.songListDetail,songsDetail:l.songsDetail},null,8,["songListDetail","songsDetail"]),Object(n["createVNode"])(r,{"comment-count":"xxx",songsDetail:l.songsDetail},null,8,["songsDetail"])])}var a=c("6c02"),i=c("bc3a"),s=c.n(i);const r=e=>(Object(n["pushScopeId"])("data-v-5cf71a3a"),e=e(),Object(n["popScopeId"])(),e),d={key:0,class:"song-list-detail-top-container clearfix"},b={class:"song-list-info"},O={class:"song-list-info-title"},j=r(()=>Object(n["createElementVNode"])("div",{style:{color:"#d03535",border:"1px solid #d03535",display:"inline-block","font-size":"20px","margin-right":"10px","border-radius":"5px",padding:"0 7px",cursor:"default"}}," 歌单 ",-1)),p={class:"song-list-info-creator"},u={style:{color:"#507daf",cursor:"pointer",margin:"0 10px"}},g={style:{"font-size":"10px","margin-left":"5px"}},m={class:"song-list-play-btn clearfix"},f=r(()=>Object(n["createElementVNode"])("i",{class:"iconfont icon-24gl-play"},"播放全部",-1)),v=[f],D=r(()=>Object(n["createElementVNode"])("i",{class:"iconfont icon-tianjia"},null,-1)),x=[D],h={class:"song-list-tag",style:{"margin-top":"10px","font-size":"12px"}},y=Object(n["createTextVNode"])(" 标签： "),S=r(()=>Object(n["createElementVNode"])("div",null,"...",-1)),N=r(()=>Object(n["createElementVNode"])("div",null,"...",-1)),L=r(()=>Object(n["createElementVNode"])("div",null,"...",-1));function V(e,t,c,o,l,a){const i=Object(n["resolveComponent"])("el-image"),s=Object(n["resolveComponent"])("el-tooltip");return c.songListDetail&&c.songListDetail.creator?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",d,[Object(n["createVNode"])(i,{class:"song-list-cover-img",src:c.songListDetail.coverImgUrl,fit:"fill"},null,8,["src"]),Object(n["createElementVNode"])("div",b,[Object(n["createElementVNode"])("div",O,[j,Object(n["createTextVNode"])(" "+Object(n["toDisplayString"])(c.songListDetail.name),1)]),Object(n["createElementVNode"])("div",p,[Object(n["createVNode"])(i,{src:c.songListDetail.creator.avatarUrl,fit:"fill",style:{"border-radius":"40px",height:"30px",width:"30px","vertical-align":"middle"}},null,8,["src"]),Object(n["createElementVNode"])("span",u,Object(n["toDisplayString"])(c.songListDetail.creator.nickname),1),Object(n["createElementVNode"])("span",g,Object(n["toDisplayString"])(o.toTime(c.songListDetail.createTime))+" 创建 ",1)]),Object(n["createElementVNode"])("div",m,[Object(n["createVNode"])(s,{effect:"light",content:"将播放列表替换为该歌单",placement:"top","open-delay":500},{default:Object(n["withCtx"])(()=>[Object(n["createElementVNode"])("div",{class:"play-all",onClick:t[0]||(t[0]=(...e)=>o.playSongList&&o.playSongList(...e))},v)]),_:1}),Object(n["createVNode"])(s,{effect:"light",content:"将歌单添加到播放列表",placement:"top","open-delay":500},{default:Object(n["withCtx"])(()=>[Object(n["createElementVNode"])("div",{class:"add-all",onClick:t[1]||(t[1]=(...e)=>o.addSongListToPlayList&&o.addSongListToPlayList(...e))},x)]),_:1})]),Object(n["createElementVNode"])("div",h,[y,(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(c.songListDetail.tags,(e,t)=>(Object(n["openBlock"])(),Object(n["createElementBlock"])("span",{key:t},Object(n["toDisplayString"])(0==t?e:"/"+e),1))),128))]),S,N,L])])):Object(n["createCommentVNode"])("",!0)}var w=c("c9a1"),k=c("3ef4"),C=c("5502"),E={name:"SongListDetail",props:["songListDetail","songsDetail"],setup(e){const t=Object(C["b"])();function c(e){return new Date(e).toISOString().split("T")[0]}function n(){w["a"].confirm("确认把播放列表替换成该歌单吗？","",{confirmButtonText:"是的",cancelButtonText:"取消",type:"warning"}).then(()=>{t.commit("PLAY_SONGLIST",e.songsDetail.songs),Object(k["a"])({type:"success",message:"播放列表已替换成该歌单"})}).catch(()=>{Object(k["a"])({type:"info",message:"取消替换"})})}function o(){t.commit("ADD_SONGLIST_TO_PLAYLIST",e.songsDetail.songs),Object(k["a"])({type:"success",message:"歌单已添加到播放列表"})}return{toTime:c,playSongList:n,addSongListToPlayList:o}}},T=(c("2e674"),c("6b0d")),_=c.n(T);const I=_()(E,[["render",V],["__scopeId","data-v-5cf71a3a"]]);var B=I;const A=Object(n["createTextVNode"])("歌曲列表"),P=["onClick"];function M(e,t,c,o,l,a){const i=Object(n["resolveComponent"])("el-menu-item"),s=Object(n["resolveComponent"])("el-menu"),r=Object(n["resolveComponent"])("el-table-column"),d=Object(n["resolveComponent"])("el-tooltip"),b=Object(n["resolveComponent"])("el-table"),O=Object(n["resolveDirective"])("loading");return Object(n["openBlock"])(),Object(n["createElementBlock"])(n["Fragment"],null,[Object(n["createVNode"])(s,{id:"song-list-menu","active-text-color":"black","default-active":o.activeIndex,mode:"horizontal"},{default:Object(n["withCtx"])(()=>[Object(n["createVNode"])(i,{index:"1",onClick:t[0]||(t[0]=e=>o.changeActiveIndex("1"))},{default:Object(n["withCtx"])(()=>[A]),_:1}),Object(n["createVNode"])(i,{index:"2",onClick:t[1]||(t[1]=e=>o.changeActiveIndex("2"))},{default:Object(n["withCtx"])(()=>[Object(n["createTextVNode"])("评论("+Object(n["toDisplayString"])(c.commentCount)+")",1)]),_:1})]),_:1},8,["default-active"]),Object(n["withDirectives"])((Object(n["openBlock"])(),Object(n["createBlock"])(b,{data:c.songsDetail.songs,stripe:!0,style:{width:"100%"},onCellDblclick:o.playSong,"row-style":o.rowStyle},{default:Object(n["withCtx"])(()=>[Object(n["createVNode"])(r,{label:"",width:"50px"},{default:Object(n["withCtx"])(e=>[Object(n["createTextVNode"])(Object(n["toDisplayString"])(e.$index),1)]),_:1}),Object(n["createVNode"])(r,{label:"",width:"30px"},{default:Object(n["withCtx"])(e=>[Object(n["createVNode"])(d,{effect:"light",content:"添加到播放列表",placement:"top","open-delay":500},{default:Object(n["withCtx"])(()=>[Object(n["createElementVNode"])("i",{class:"iconfont icon-tianjia",onClick:t=>o.addToPlayList(e.row)},null,8,P)]),_:2},1024)]),_:1}),Object(n["createVNode"])(r,{prop:"name",label:"标题"}),Object(n["createVNode"])(r,{prop:"ar",label:"歌手"},{default:Object(n["withCtx"])(e=>[(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(e.row.ar,(e,t)=>(Object(n["openBlock"])(),Object(n["createElementBlock"])("span",{key:e.id},Object(n["toDisplayString"])(0==t?e.name:"/"+e.name),1))),128))]),_:1}),Object(n["createVNode"])(r,{prop:"al.name",label:"专辑"}),Object(n["createVNode"])(r,{prop:"dt",label:"时间"},{default:Object(n["withCtx"])(e=>[Object(n["createTextVNode"])(Object(n["toDisplayString"])(o.formatSongTime(e.row.dt)),1)]),_:1})]),_:1},8,["data","onCellDblclick","row-style"])),[[n["vShow"],"1"===o.activeIndex],[O,!c.songsDetail.songs]]),Object(n["withDirectives"])(Object(n["createElementVNode"])("div",null,"comments",512),[[n["vShow"],"2"===o.activeIndex]])],64)}var z={name:"SongListMenu",props:["commentCount","songsDetail"],setup(){const e=Object(C["b"])();let t=Object(n["ref"])("1");function c(e){t.value=e,console.log(t)}function o(e){e=Math.floor(e/1e3);let t=e/60>=10?"":"0"+Math.floor(e/60),c=(e%60>=10?"":"0")+e%60;return t+":"+c}function l(t){e.commit("ADD_TO_PLAYLIST",t),Object(k["a"])({message:"已添加到播放列表中",type:"success"})}let a=Object(n["computed"])(()=>e.state.currentSongDetail);function i(t){null!=a.value&&t.id==a.value.id||(localStorage.setItem("currentSongDetail",JSON.stringify(t)),e.commit("DBCLICK_SONG",Object(n["toRaw"])(t)))}function s({row:e}){if(a.value)return e.id===a.value.id?"color:red;":""}return{activeIndex:t,changeActiveIndex:c,formatSongTime:o,rowStyle:s,playSong:i,currentSongDetail:a,addToPlayList:l}}};c("7e2b");const F=_()(z,[["render",M],["__scopeId","data-v-3d1f615e"]]);var G=F,J={name:"SongList",components:{SongListMenu:G,SongListDetail:B},setup(){Object(n["onMounted"])(()=>{Object(k["a"])({message:Object(n["h"])("div",null,[Object(n["h"])("span",null,"点击"),Object(n["h"])("b",null,"红色播放按钮"),Object(n["h"])("span",null,"或者双击"),Object(n["h"])("b",null,"某首歌曲"),Object(n["h"])("span",null,"进行播放，播放歌曲后"),Object(n["h"])("b",null,"点击左下角歌曲封面，显示滚动歌词")]),type:"success",duration:0,showClose:!0})});const e=Object(a["c"])().currentRoute.value.params;let t=Object(n["ref"])({}),c=Object(n["ref"])({});return s.a.get("playlist/detail",{params:{id:e.id}}).then(e=>{t.value=e.data.playlist;let c="";return t.value.trackIds.forEach(e=>{c+=e.id+","}),s.a.get("song/detail",{params:{ids:c.substr(0,c.length-1)}})}).then(e=>{c.value=e.data,console.log(c)}),{songListDetail:t,songsDetail:c}}};c("ae52");const Y=_()(J,[["render",l],["__scopeId","data-v-2c22c2a1"]]);t["default"]=Y},"2e674":function(e,t,c){"use strict";c("01af")},"7e2b":function(e,t,c){"use strict";c("dd61")},ae52:function(e,t,c){"use strict";c("d093")},d093:function(e,t,c){},dd61:function(e,t,c){}}]);
//# sourceMappingURL=chunk-2dfa3130.e50adfcc.js.map